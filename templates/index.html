{% extends "base.html" %}

{% block content %}

<!-- 1. HERO SECTION (DIBATASI LEBARNYA) -->
<div class="container">
    <!-- PERBAIKAN: Pindahkan kelas gradien ke dalam container -->
    <div class="hero-section-gradient text-white py-5 mb-5 shadow-lg text-center rounded-4">
        <!-- JUDUL BARU -->
        <h1 class="display-4 fw-bolder mb-3 animate__animated animate__fadeInDown text-white">
            Siapkan Skill untuk Dunia Kerja Sejak Sekarang!
        </h1>
        <!-- PARAGRAF BARU -->
        <p class="lead mb-4 animate__animated animate__fadeIn text-white-50">
            Pelajari skill digital yang dibutuhkan industri dan bangun portofolio sebelum lulus.
        </p>
        
        <!-- Search Bar Interaktif -->
        <form action="{{ url_for('search') }}" method="GET" class="d-flex justify-content-center mb-5 animate__animated animate__fadeInUp">
            <div class="input-group" style="max-width: 600px;">
                <input type="text" name="q" class="form-control form-control-lg border-0 rounded-start-pill shadow-sm" placeholder="Cari kursus, misalnya: Python, Jaringan, Desain Grafis" aria-label="Cari kursus">
                <button class="btn btn-light btn-lg rounded-end-pill shadow-sm" type="submit">
                    <i class="bi bi-search text-primary"></i>
                </button>
            </div>
        </form>

        <!-- Statistik Singkat (Informatif) -->
        <div class="row justify-content-center text-white mt-4 animate__animated animate__fadeInUp">
            <div class="col-md-3 col-6 mb-3">
                <h3 class="fw-bolder">100+</h3>
                <p class="small text-white-50">Total Pelajaran</p>
            </div>
            <div class="col-md-3 col-6 mb-3">
                <h3 class="fw-bolder">4.9</h3>
                <p class="small text-white-50">Rating Terbaik</p>
            </div>
            <div class="col-md-3 col-6 mb-3">
                <h3 class="fw-bolder">5K+</h3>
                <p class="small text-white-50">Siswa Terdaftar</p>
            </div>
        </div>
    </div> <!-- AKHIR CONTAINER -->
</div>

<!-- 2. VALUE PROPOSITION (DIBUNGKUS CONTAINER) -->
<div class="container"> 
    <div class="my-5 py-3">
        <h3 class="text-center mb-5 fw-bold text-primary">Kenapa Harus Tutor Digital?</h3>
        <div class="row text-center g-4">
            <div class="col-md-4">
                <!-- Card Glassmorphism -->
                <div class="card h-100 border-0 shadow-lg p-4 hover-scale">
                    <!-- Ikon menggunakan warna aksen Cyan (melalui style.css) -->
                    <i class="bi bi-lightning-charge-fill mb-3 text-primary" style="font-size: 2rem;"></i>
                    <h5 class="fw-bold">Materi Kekinian</h5>
                    <p class="text-muted">Belajar teknologi terbaru yang dipakai industri, bukan teori usang.</p>
                </div>
            </div>
            <div class="col-md-4">
                <!-- Card Glassmorphism -->
                <div class="card h-100 border-0 shadow-lg p-4 hover-scale">
                    <i class="bi bi-laptop-fill mb-3 text-primary" style="font-size: 2rem;"></i>
                    <h5 class="fw-bold">Belajar Fleksibel</h5>
                    <p class="text-muted">Akses 24/7. Atur jadwal belajarmu sendiri, cocok buat anak sekolah!</p>
                </div>
            </div>
            <div class="col-md-4">
                <!-- Card Glassmorphism -->
                <div class="card h-100 border-0 shadow-lg p-4 hover-scale">
                    <i class="bi bi-patch-check-fill mb-3 text-primary" style="font-size: 2rem;"></i>
                    <h5 class="fw-bold">Sertifikat Resmi</h5>
                    <p class="text-muted">Dapatkan sertifikat yang bisa kamu lampirkan di portofolio atau CV.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 3. KATEGORI UTAMA (DIBUNGKUS CONTAINER) -->
<div class="container">
    <div class="mt-5 pt-3">
        <h3 class="mb-4 fw-bold text-center text-primary">Jelajahi Kategori Populer</h3>
        <p class="text-center text-muted mb-5">Pilih bidang yang paling kamu suka dan mulai belajar hari ini!</p>
        
        <div class="row g-4 text-center justify-content-center">
            {% set categories = [
                {'name': 'Web Dev', 'icon': 'code-slash', 'desc': 'Bikin website keren dari nol.'},
                {'name': 'Data Science', 'icon': 'graph-up', 'desc': 'Analisis data dan AI.'},
                {'name': 'Desain Grafis', 'icon': 'palette', 'desc': 'Jago Photoshop & Illustrator.'},
                {'name': 'Jaringan', 'icon': 'router', 'desc': 'Dasar-dasar koneksi internet.'},
                {'name': 'Office', 'icon': 'file-earmark-text', 'desc': 'Mahir Word, Excel, PowerPoint.'},
                {'name': 'Umum', 'icon': 'lightbulb', 'desc': 'Keterampilan umum dan soft skill.'}
            ] %}
            
            {% for cat in categories %}
            <div class="col-6 col-md-4 col-lg-2">
                <a href="{{ url_for('courses_by_category', category_name=cat.name) }}" class="text-decoration-none">
                    <!-- Menggunakan kelas 'category-hover-effect' dan 'card' Glassmorphism -->
                    <div class="card border-0 shadow-lg h-100 category-hover-effect hover-scale" style="border-radius: 15px;">
                        <div class="card-body p-4">
                            <!-- Ikon menggunakan warna aksen Cyan (melalui style.css) -->
                            <i class="bi bi-{{ cat.icon }} mb-2 text-primary" style="font-size: 2.5rem;"></i>
                            <h6 class="fw-bolder text-dark mb-1">{{ cat.name }}</h6>
                            <small class="text-muted d-none d-md-block">{{ cat.desc }}</small>
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- 4. KURSUS UNGGULAN (DIBUNGKUS CONTAINER) -->
<div id="featured-courses" class="container mt-5 pt-5">
    <h3 class="mb-4 fw-bold text-center text-primary">Kursus Paling Populer ðŸ”¥</h3>
    <p class="text-center text-muted mb-5">Lihat kursus yang paling banyak diminati oleh siswa lain.</p>
    
    <div class="row g-4 justify-content-center">
        {% for course in courses[:4] %}
        <div class="col-md-6 col-lg-4">
            <!-- KODE COURSE CARD DIINTEGRASIKAN LANGSUNG DI SINI -->
            <div class="card h-100 hover-scale shadow-sm">
                <!-- Gambar Kursus -->
                <div class="position-relative">
                    {% if course.image_url %}
                        <img src="{{ url_for('static', filename='uploads/' + course.image_url) }}" class="card-img-top" alt="{{ course.title }}" style="height: 200px; object-fit: cover;">
                    {% else %}
                        <!-- Placeholder jika tidak ada gambar -->
                        <div class="bg-light text-center d-flex align-items-center justify-content-center" style="height: 200px;">
                            <i class="bi bi-image-fill text-secondary display-4"></i>
                        </div>
                    {% endif %}
                    
                    <!-- Badge Kategori dan Rating -->
                    <span class="badge bg-primary position-absolute top-0 start-0 m-2">{{ course.category }}</span>
                    <span class="badge bg-warning text-dark position-absolute top-0 end-0 m-2">
                        <i class="bi bi-star-fill me-1"></i> {{ course.rating|round(1) }}
                    </span>
                </div>
                
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title fw-bold text-dark">{{ course.title }}</h5>
                    <p class="card-text small text-muted mb-2">Oleh: {{ course.instructor_name }}</p>
                    
                    <!-- Info Tambahan (DURASI DIPERBAIKI) -->
                    {% set total_minutes = course.total_duration_minutes() %}
                    {% set total_hours = (total_minutes / 60)|round(1) %}
                    <div class="d-flex justify-content-between small text-muted mb-3">
                        <span><i class="bi bi-book me-1"></i> {{ course.total_lessons() }} Pelajaran</span>
                        <span><i class="bi bi-clock me-1"></i> {{ total_hours }} Jam</span>
                    </div>

                    <!-- Harga -->
                    <div class="mt-auto">
                        {% if course.price > 0 %}
                            <div class="d-flex align-items-center">
                                {% if course.discount_percent > 0 %}
                                    <span class="text-danger text-decoration-line-through small me-2">Rp {{ course.price|format_rupiah }}</span>
                                    <span class="badge bg-success me-2">DISKON {{ course.discount_percent }}%</span>
                                {% endif %}
                                <span class="final-price fw-bolder">Rp {{ course.final_price|format_rupiah }}</span>
                            </div>
                        {% else %}
                            <span class="badge bg-success fs-6 fw-bolder">GRATIS</span>
                        {% endif %}
                    </div>
                </div>
                
                <div class="card-footer bg-white border-0 pt-0">
                    <a href="{{ url_for('course_detail', course_id=course.id) }}" class="btn btn-primary w-100 fw-bold">
                        Lihat Detail <i class="bi bi-arrow-right"></i>
                    </a>
                </div>
            </div>
            <!-- AKHIR KODE COURSE CARD -->
        </div>
        {% endfor %}
    </div>
    
    <div class="text-center mt-5">
        <a href="{{ url_for('search') }}" class="btn btn-primary btn-lg fw-bold shadow-lg hover-scale">
            Lihat Semua Kursus ({{ courses|length }})
        </a>
    </div>
</div>

{% endblock %}